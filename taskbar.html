<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <title>Taskbar workspace html file</title>
    <link type="text/css" rel="stylesheet" href="web-window-styles.css" media="all" />-->
    <link type="text/css" rel="stylesheet" href="web-window.css" media="all" />
</head>
<body>
    <div id="web-window-main-menu">
        <span class="menu-title">Menu</span>
        <ul id="web-window-main-menu-container">
        </ul>
    </div>
    <ul id="web-window-taskbar"></ul>
    
    <div id="web-window-desktop">
        <div id="before-node"></div>
    </div>
    <script type="text/javascript" src="web-window-vanilla.js"></script>
    <script type="text/javascript">
        var newEnvironment = new WebWindow.Board({
            menuConfig : {
                menuData : [
                    {
                        title : 'Site Window (resizeable window)',
                        content : 'Main Page',
                        height : '400px',
                        width : '1400px'
                    },
                    {
                        title : 'Second Window',
                        content : '<textarea style="min-width: 800px !important; height: 400px !important;">Test content</textarea>',
                        height : '300px',
                        width : '250px' 
                    },
                    {
                        title : 'Test Menu Item'
                    },
                    {
                        title : 'Test Menu Item 2'
                    }
                ]
            }
        });

        function taskAssistantTests() {
            newEnvironment.taskAssistant.refreshTasks();
            var testTask = newEnvironment.taskAssistant.createTask({
                title : 'New Task',
                content : '<span style="color: white !important">Testing Task from environment</span>',
                height : '150px',
                width : '20rem'
            });
            var filteredTasks = newEnvironment.taskAssistant.getTasks(testTask.getID());
            if (filteredTasks.length > 1) {
                console.log("This means that the date has occurred twice");
            } else {
                console.log(["IDs should be consistent", testTask.getID(), filteredTasks[0].getID()]);
                console.log(["Origin object creation time: ", new Date(Number(testTask.getID()))]);
                console.log(["Filtered creation time: ", new Date(Number(filteredTasks[0].getID()))]);
            }
            var secondTask = newEnvironment.taskAssistant.createTask({
                title : 'Second Task',
                content : "",
                height : '10rem',
                width : '10rem'
            });
            var batchRetrieve = newEnvironment.taskAssistant.getTasks([
                testTask.getID(),
                secondTask.getID()
            ]);
            if (batchRetrieve.map && batchRetrieve.length) {
                var removeTimeout = 0;
                batchRetrieve.map(function(task) {
                    removeTimeout += 1000;
                    task.maximize();
                    setTimeout(function() {
                        console.log(["Closing task", Date.now()]);
                        task.minimize();
                        newEnvironment.taskAssistant.removeTaskById(task.getID(), function() {
                            console.log(["Task removed", Date.now()]);
                        });
                    }, 2000 + removeTimeout);
                });
            }
        }
        // taskAssistantTests();
    </script>
</body>
</html>